# Data Visualization {#viz}

```{r setup-viz, include=FALSE, purl=FALSE}
# take from the source
```


```{r load-package, eval=F}
#
# Install packages
#
# Install xfun so that I can use xfun::pkg_load2
if (find.package('xfun') == '') install.packages('xfun')
xf <- loadNamespace('xfun')

cran_primary <- c(
                  "dplyr", 
                  "gapminder", 
                  "ggplot2", 
                  "nycflights13"
)
cran_secondary <- c(
                    "patchwork", 
                    "readr", 
                    "scales", 
                    "stringr"
)

if (length(cran_primary) != 0) xf$pkg_load2(cran_primary)
if (length(cran_secondary != 0) xf$pkg_load2(cran_secondary)

gg <- loadNamespace('ggplot2')
dp <- loadNamespace('dplyr')

import::from(magrittr, '%>%', '%T>%')
```

```{r, echo=F, message=FALSE, warning=FALSE}
gg <- import::from(ggplot2, .all=TRUE, .into={new.env()})
dp <- import::from(dplyr, .all=TRUE, .into={new.env()})

import::from(magrittr, '%>%', '%T>%')
```


## Some core concepnts

layer

mapping


### An example

The joy of stats
[Hans Rosling](https://www.youtube.com/watch?v=jbkSRLYSojo)

Let's try to replicate part of the graphics. 
Health (life-exp) as a function of wealth (income) 
across different contries.

```{r, echo=FALSE, purl=FALSE}

```


### The grammar of graphics

graphic *layer* vs. linguistic element






### Components of the grammar

a graphic consists of 
data
geometric object (geom for short)
aesthetic attributes (aes for short)

